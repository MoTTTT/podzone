<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Martin Colley" /><link rel="canonical" href="https://musings.thruhere.net/podzone/technicalIoT/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Rust on the uNode embedded controller development board - Podzone</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Rust on the uNode embedded controller development board";
        var mkdocs_page_input_path = "technicalIoT.md";
        var mkdocs_page_url = "/podzone/technicalIoT/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Podzone
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Requirements</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../requirementIntroduction/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../requirementBackground/">Background</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../requirementBusinessBrief/">QApps Business Brief</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Analysis</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalConsumerCloud/">Consumer Cloud</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalExternalServices/">External Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inventorySite/">Site Inventory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalTasklist1/">Task List: southern.podzone.net</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalTasklist2/">Task List: northern.podzone.net</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inventoryCosting/">Costing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Workload</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../technicalSiteStructure/">Podzone Sites</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalStaticSite/">Wrapping static site functionality into a helm chart</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalWordpress/">Installing Wordpress</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalApplication/">Application Build</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Rust on the uNode embedded controller development board</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#toolchain-installation">Toolchain installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#main-references">Main references</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalRedmine/">Redmine</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Substrate</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalKubernetes/">Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalCluster/">Implementation Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalCeph/">Persistent data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalIngress/">Ingress</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalNFS/">Deprecated</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalNetwork/">Network Topology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalProxy/">Reverse proxy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalIssues/">Issues</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalTools/">Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalPrometheus/">Prometheus Implementation Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../technicalWireguard/">Wireguard installation notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Inventory</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../inventoryServers/">Server Inventory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inventoryHosts/">Hosts Inventory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inventoryIoT/">IoT (Internet of Things) devices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inventoryVm/">Virtual Machine Inventory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inventoryWorkstation/">Workstation config</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">References</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../referencesApplication/">Application references</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../referencesIoT/">Edge and IoT References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../referencesResearch/">Research References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../referencesReserve/">Reserve References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../referencesTroubleshooting/">Troubleshooting References</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Podzone</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Workload</li>
      <li class="breadcrumb-item active">Rust on the uNode embedded controller development board</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="rust-on-the-unode-embedded-controller-development-board">Rust on the uNode embedded controller development board</h1>
<p>The uNode (pronounced microNode) development board was designed in 1994, with a 10 unit production run in 2015.</p>
<p>The board exposes all the pins on a connector to the 80C552 microcontroller, as well as providing on board RTC, RAM, a 16 key keypad, a 2X24 character LCD screen, and an RS232 port.</p>
<p>Power is supplied at 9V, which is regulated on-board. There is an onboard battery keeping RAM values static, and RTC functioning in the absence of power 9V power.</p>
<p>The board has a bootloader mode, selected with a dip switch, that allows code to be streamed in on the serial port, and stored in RAM, for execution in run mode. The bootloader mode also supports setting the RTC, and serial baud rate.</p>
<h2 id="toolchain-installation">Toolchain installation</h2>
<p>This is being recorded for when we want to automate build environment build.</p>
<ul>
<li>Note: The tool-chain needs to run on Linux, I shelled into a workstation from my Macbook to do the following:</li>
<li><code>git clone https://github.com/meta-rust/meta-rust.git</code></li>
<li><code>git clone https://git.yoctoproject.org/poky</code></li>
<li><code>cd poky &amp;&amp; git checkout -b honister origin/honister &amp;&amp; cd -</code></li>
<li><code>git clone https://git.openembedded.org/meta-openembedded</code></li>
<li><code>cd meta-openembedded &amp;&amp; git checkout -b honister origin/honister &amp;&amp; cd -</code></li>
<li><code>cd pokey</code></li>
<li>Add rust lines to <code>BBLAYERS</code> in <code>conf/bblayers.conf</code>:</li>
</ul>
<pre><code class="language-text">  /mnt/data/tmp/meta-openembedded/meta-oe \
  /mnt/data/tmp/meta-rust \`
</code></pre>
<ul>
<li>Add <code>rust-hello-world</code> file to build directory:</li>
</ul>
<pre><code class="language-rust">inherit cargo

SRC_URI = &quot;git://github.com/meta-rust/rust-hello-world.git;protocol=https;branch=master&quot;
SRCREV=&quot;e0fa23f1a3cb1eb1407165bd2fc36d2f6e6ad728&quot;
LIC_FILES_CHKSUM=&quot;file://COPYRIGHT;md5=e6b2207ac3740d2d01141c49208c2147&quot;

SRC_URI += &quot;\
    file://0001-enable-LTO.patch \
    &quot;

SUMMARY = &quot;Hello World by Cargo for Rust&quot;
HOMEPAGE = &quot;https://github.com/meta-rust/rust-hello-world&quot;
LICENSE = &quot;MIT | Apache-2.0&quot;

S = &quot;${WORKDIR}/git&quot;

BBCLASSEXTEND = &quot;native&quot;
</code></pre>
<ul>
<li><code>bitbake rust-hello-world</code></li>
<li>Initial run reported missing toolchain dependencies: <code>sudo apt install chrpath diffstat liblz4-tool</code></li>
<li>Second run failed due to broken pipe, after an hour or so.</li>
<li>
<p>Third run failed due to broken pipe</p>
</li>
<li>
<p>For Rasperry Pi pico: <code>MACHINE should be set to "raspberrypi-pico"</code></p>
</li>
<li>
<p><code>git clone --recurse-submodules https://github.com/ahcbb6/meta-raspberrypi-baremetal.git</code></p>
</li>
</ul>
<h3 id="main-references">Main references</h3>
<ul>
<li><a href="https://michael2012z.medium.com/rust-with-yocto-eab41476cd7b">https://michael2012z.medium.com/rust-with-yocto-eab41476cd7b</a></li>
<li><a href="https://jaycarlson.net/embedded-linux/">https://jaycarlson.net/embedded-linux/</a></li>
<li><a href="https://github.com/ahcbb6/meta-raspberrypi-baremetal">https://github.com/ahcbb6/meta-raspberrypi-baremetal</a></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../technicalApplication/" class="btn btn-neutral float-left" title="Application Build"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../technicalRedmine/" class="btn btn-neutral float-right" title="Redmine">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../technicalApplication/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../technicalRedmine/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
